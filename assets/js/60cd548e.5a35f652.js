"use strict";(globalThis.webpackChunkknowledge_bank=globalThis.webpackChunkknowledge_bank||[]).push([[3826],{8453(e,t,n){n.d(t,{R:()=>a,x:()=>c});var s=n(6540);const r={},o=s.createContext(r);function a(e){const t=s.useContext(o);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(o.Provider,{value:t},e.children)}},8989(e,t,n){n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>l,frontMatter:()=>a,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"frontend/react/archive/redux/usage","title":"\u041f\u043e\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435","description":"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0435","source":"@site/docs/3 - frontend/5 - react/88-archive/2-redux/4-usage.md","sourceDirName":"3 - frontend/5 - react/88-archive/2-redux","slug":"/frontend/react/archive/redux/usage","permalink":"/knowledge-bank/docs/frontend/react/archive/redux/usage","draft":false,"unlisted":false,"editUrl":"https://github.com/EvgenyLeukhin/knowledge-bank/edit/main/docs/3 - frontend/5 - react/88-archive/2-redux/4-usage.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"\u041f\u043e\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Thunks","permalink":"/knowledge-bank/docs/frontend/react/archive/redux/thunks"},"next":{"title":"Redux-classic","permalink":"/knowledge-bank/docs/frontend/react/archive/redux/classic"}}');var r=n(4848),o=n(8453);const a={title:"\u041f\u043e\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435",sidebar_position:4},c=void 0,i={},u=[{value:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0435",id:"\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435-\u0432-\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0435",level:2},{value:"\u0425\u0443\u043a\u0438 \u0434\u043b\u044f redux",id:"\u0445\u0443\u043a\u0438-\u0434\u043b\u044f-redux",level:2},{value:"\u0418\u043c\u043f\u043e\u0440\u0442 \u0441\u0435\u043b\u0435\u043a\u0442\u043e\u0440\u044b",id:"\u0438\u043c\u043f\u043e\u0440\u0442-\u0441\u0435\u043b\u0435\u043a\u0442\u043e\u0440\u044b",level:2},{value:"Redux hooks",id:"redux-hooks",level:2},{value:"useSelector",id:"useselector",level:3},{value:"useDispatch",id:"usedispatch",level:3}];function d(e){const t={code:"code",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"\u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435-\u0432-\u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0435",children:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u0432 \u043a\u043e\u043c\u043f\u043e\u043d\u0435\u043d\u0442\u0435"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"import { useSyncActions, useAppSelector } from '@/store';\n\n...\n// get state from store by useAppSelector\nconst {\n  counterStore: { counter },\n  usersStore: { users, isLoading, isError, errorMessage },\n} = useAppSelector(state => state);\n\n// get actions\nconst {\n  changeCounter,\n  clearCounter,\n  dicrementCounter,\n  incrementCounter,\n  addRandomUser2,\n  clearUsers,\n  deleteUser,\n  deleteLastUser,\n  fetchUsersThunk,\n} = useSyncActions();\n"})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"\u0445\u0443\u043a\u0438-\u0434\u043b\u044f-redux",children:"\u0425\u0443\u043a\u0438 \u0434\u043b\u044f redux"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"import { useSelector, useDispatch } from 'react-redux';\n\n// \u0438\u043c\u043f\u043e\u0440\u0442 \u044d\u043a\u0448\u0435\u043d\u0430 \u0438\u0437 redux\nimport { fetchProducts } from 'redux/productsSlice';\n\n...\n\n// I \u0432\u0430\u0440\u0438\u0430\u043d\u0442 - \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u044b \u043d\u0430 \u043a\u0430\u0436\u0434\u044b\u0439 state\nconst users = useSelector(store => store.usersSlice);\nconst products = useSelector(store => store.productsSlice);\nconst calculated = useSelector(store => store.productsSlice.data.map(product => product.id));\n\n\n// II \u0432\u0430\u0440\u0438\u0430\u043d\u0442 - \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u043e\u0431\u044a\u0435\u043a\u0442\u0430 c\u043e state-\u043f\u043e\u043b\u044f\u043c\u0438\nconst { users, products, calculated } = useSelector((store: TStore) => ({\n  users: store.usersSlice.data,\n  products: store.productsSlice.data,\n\n  // \u043c\u043e\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0432\u0430\u0442\u044c \u043a\u0430\u0441\u0442\u043e\u043c\u043d\u044b\u0435 \u0432\u044b\u0447\u0438\u0441\u043b\u044f\u0435\u043c\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f \u0438\u0437 store\n  calculated: store.productsSlice.data.map(product => product.id),\n}));\n\n// \u043c\u043e\u0436\u043d\u043e \u0437\u0430\u0441\u043e\u0432\u044b\u0432\u0430\u0442\u044c \u043c\u043d\u043e\u0433\u043e \u043b\u043e\u0433\u0438\u043a\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 useSelector\nconst { hubs } = useSelector((state: TStore) => ({\n    hubs: state.hubs.hubs.filter(hub => {\n        return state.auth.hubIds?.includes(hub.id) && (!!hub.timezone && !!hub.timeFrom && !!hub.timeTo);\n    })\n    .map(({ name, id, code }) => ({\n        name: code ? `${name} (${code})` : name,\n        value: id,\n    })).sort((a, b) => a.name.localeCompare(b.name))\n}));\n\n...\n\nconst dispatch = useDispatch();\n\n...\n\n// \u0432\u0441\u0435 \u044d\u043a\u0448\u0435\u043d\u044b \u0438\u0437 redux, \u0434\u043e\u043b\u0436\u043d\u044b \u043e\u0431\u0430\u0440\u0430\u0447\u0438\u0432\u0430\u0442\u044c\u0441\u044f dispatch.\nuseEffect(() => {\n  dispatch(fetchProducts(data));\n}, []);\n\n\n"})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"\u0438\u043c\u043f\u043e\u0440\u0442-\u0441\u0435\u043b\u0435\u043a\u0442\u043e\u0440\u044b",children:"\u0418\u043c\u043f\u043e\u0440\u0442 \u0441\u0435\u043b\u0435\u043a\u0442\u043e\u0440\u044b"}),"\n",(0,r.jsx)(t.p,{children:"\u041c\u043e\u0436\u043d\u043e \u044d\u043a\u0441\u043f\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u0435 \u0441\u0435\u043b\u0435\u043a\u0442\u043e\u0440\u044b"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",children:"import { RootState } from '..';\nimport { INotificationTemplate, INotificationTemplatesState } from './types';\n\n// full state\nexport const selectNotificationTemplatesState = (\n  globalState: RootState,\n): INotificationTemplatesState => globalState.notificationTemplates;\n\n// templates\nexport const selectNotificationTemplates = (\n  globalState: RootState,\n): INotificationTemplate[] => globalState.notificationTemplates.templates;\n\n// selectedTemplate\nexport const selectSelectedNotificationTemplate = (\n  globalState: RootState,\n): INotificationTemplate | null =>\n  globalState.notificationTemplates.selectedTemplate;\n"})}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"redux-hooks",children:"Redux hooks"}),"\n",(0,r.jsx)(t.h3,{id:"useselector",children:"useSelector"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"import { useSelector } from 'react-redux';\n\n// \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c \u0441\u043f\u0438\u0441\u043e\u043a users \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e users, couriers \u0432 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0443\u044e couriers\nconst users = useSelector(store => store.users);\nconst couriers = useSelector(store => store.couriers);\n\n// destructuring - \u0432\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0438\u0437 \u0444\u0443\u043d\u043a\u0438\u0446\u0438\u0438 \u0438 \u0435\u0433\u043e \u0434\u0435\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0437\u0430\u0446\u0438\u044f\nconst { orders, deliveryTypes, routes, loading, forcing } = useSelector(\n  (state: TStore) => ({\n    forcing: state.orders.forcing,\n    orders: state.orders.orders,\n    loading: state.orders.loading,\n    routes: state.routes.routes,\n    deliveryTypes: state.dictionaries.deliveryTypes,\n  }),\n);\n\n// \u0432\u043e\u0437\u0432\u0440\u0430\u0442 \u043e\u0431\u044a\u0435\u043a\u0442\u0430 \u0441 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043d\u044b\u043c\u0438 \u043f\u043e\u043b\u044f\u043c\u0438 \u0441 \u043f\u043e\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0439 \u0434\u0435\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0437\u0430\u0446\u0438\u0435\u0439\nconst { selectedRoutes, editingRoute } = useSelector((state: TStore) => ({\n  selectedRoutes: state.routes.routes.filter(route => route.selected),\n  editingRoute:\n    state.routes.routes.find(route => route.editing) ||\n    state.routes.exportedRoutes.find(route => route.editing),\n}));\n\n// \u0434\u0432\u043e\u0439\u043d\u0430\u044f \u0434\u0435\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0438\u0437\u0430\u0446\u0438\u044f\nconst {\n  hubs,\n  zones,\n  auth,\n  dictionaries: { paymentTypes, deliveryTypes, additionalTypes },\n} = useSelector((state: TStore) => ({\n  hubs: state.hubs.hubs,\n  zones: state.zones.zones,\n  auth: state.auth,\n  dictionaries: state.dictionaries,\n}));\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"// \u043c\u043d\u043e\u0433\u043e \u043b\u043e\u0433\u0438\u043a\u0438 \u0432\u043d\u0443\u0442\u0440\u0438 useSelector\nconst { hubs } = useSelector((state: TStore) => ({\n  hubs: state.hubs.hubs\n    .filter(hub => {\n      return (\n        state.auth.hubIds?.includes(hub.id) &&\n        !!hub.timezone &&\n        !!hub.timeFrom &&\n        !!hub.timeTo\n      );\n    })\n    .map(({ name, id, code }) => ({\n      name: code ? `${name} (${code})` : name,\n      value: id,\n    }))\n    .sort((a, b) => a.name.localeCompare(b.name)),\n}));\n"})}),"\n",(0,r.jsx)(t.h3,{id:"usedispatch",children:"useDispatch"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"import { useDispatch } from 'react-redux';\nimport { getAllZones } from 'redux/effect/Zones';\n...\n\nconst dispatch = useDispatch();\n\n// \u043f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435\nuseEffect(() => {\n    dispatch(getAllZones());\n}, []);\n"})}),"\n",(0,r.jsx)(t.hr,{})]})}function l(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);